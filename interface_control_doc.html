<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Interface Control Document &#8212; 7819 DMS 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Interface Specification" href="interface_spec.html" />
    <link rel="prev" title="1. Firmware Specification" href="firmware_spec.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="interface-control-document">
<span id="icd"></span><h1>2. Interface Control Document<a class="headerlink" href="#interface-control-document" title="Permalink to this headline">¶</a></h1>
<div class="section" id="copyright">
<h2>2.1. Copyright<a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h2>
<p>Copyright Creare LLC 2016.  This software specification is proprietary and should be considered confidential.  Reproduction or distribution prohibited without written permission from Creare.</p>
</div>
<div class="section" id="introduction">
<h2>2.2. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document describes the communication protocols used between the DMS controller (hereafter simply referred to as the DMS),
and the host computer.  It partially replicates information found in the header file, <a class="reference internal" href="#dmscodes-h"><span class="std std-ref">dmsCodes.h</span></a>, found in the ‘Shared’ area
of the source code tree.  Every effort has been made to make these two documents agree, but in the case of disagreement
dmsCodes.h, and thus the source code, prevail.</p>
</div>
<div class="section" id="usb-interface">
<span id="id1"></span><h2>2.3. USB Interface<a class="headerlink" href="#usb-interface" title="Permalink to this headline">¶</a></h2>
<p>Communication between the DMS and the host PC occurs over a USB 2.0, Full speed (12 Mbps) connection.  Creare recommends,
and our example code utilizes, Microsoft’s WinUSB driver system, but the interface is generic USB and so any low level USB
access library, such as lib-usb, could be used.</p>
<p>The vendor ID is currently 0xABCD.  This is a bogus vendor ID, because at this time Creare is not registered with the USB
Implementers Forum.  However, it is adequate for non-public device deployment.  The product ID is 0x7819.</p>
<p>Two endpoints are defined.  Endpoint 0 is the standard control endpoint required for all USB devices.  The DMS makes use
of this endpoint to receive commands and return results.</p>
<p>Endpoint 1 is a standard bulk endpoint.  This endpoint is used to stream raw data samples from the DMS to the host,
for example in alignment mode.  The DMS has no support for bulk streaming to the device.</p>
<p>Note that in all cases, all data elements are transmitted and received in LSB (little endian) format.</p>
</div>
<div class="section" id="endpoint-0-commands">
<h2>2.4. Endpoint 0 Commands<a class="headerlink" href="#endpoint-0-commands" title="Permalink to this headline">¶</a></h2>
<p>The DMS supports the commands shown in <a class="reference internal" href="#supported-commands-summary"><span class="std std-numref">Table 2.1</span></a>.  Note that these are ‘Vendor’ Device Requests; refer to Chapter 9 of the
USB 2.0 specification.  A ‘Read’ is defined here as the DMS sending control data back to the host (Device-to-host);
a ‘Write’ is defined as the host sending additional data along with the command (Host-to-device).  If the length is
0 the direction is immaterial.  The function HI(x) takes the high order 16-bits of a 32-bit word x.  Likewise, LO(x) takes the low order 16-bits.</p>
<table border="1" class="colwidths-given docutils" id="supported-commands-summary">
<caption><span class="caption-number">Table 2.1 </span><span class="caption-text">Supported Commands Summary</span><a class="headerlink" href="#supported-commands-summary" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
<th class="head">R/W</th>
<th class="head">bRequest</th>
<th class="head">wValue</th>
<th class="head">wIndex</th>
<th class="head">wLength</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>STATUS</td>
<td>Controller condition</td>
<td>R</td>
<td>0x01</td>
<td>0</td>
<td>0</td>
<td>12</td>
</tr>
<tr class="row-odd"><td>ID</td>
<td>Build date and unique ID</td>
<td>R</td>
<td>0x02</td>
<td>0</td>
<td>0</td>
<td>TODO</td>
</tr>
<tr class="row-even"><td>CONFIG_GET</td>
<td>Read configuration data</td>
<td>R</td>
<td>0x03</td>
<td>0</td>
<td>0</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>CONFIG_SET</td>
<td>Write configuration data</td>
<td>W</td>
<td>0x04</td>
<td>0</td>
<td>0</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>CALIBRATE</td>
<td>Run a calibration process</td>
<td>R</td>
<td>0x05</td>
<td>1, 2, or 3</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>GET_CALIBRATION</td>
<td>Get calibration results</td>
<td>R</td>
<td>0x06</td>
<td>0</td>
<td>0</td>
<td>1688</td>
</tr>
<tr class="row-even"><td>STORE_CALIBRATION</td>
<td>Write current calibration to non-volatile memory</td>
<td>R</td>
<td>0x07</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>MONITOR_DISPENSE</td>
<td>Begin monitoring</td>
<td>R</td>
<td>0x08</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td>GET_DISPENSE_DATA</td>
<td>Return results from monitoring</td>
<td>R</td>
<td>0x09</td>
<td>HI(offset)</td>
<td>LO(offset)</td>
<td>TBD</td>
</tr>
<tr class="row-odd"><td>CLEAR_HISTORY</td>
<td>Remove the accumulated previous results used as reference</td>
<td>R</td>
<td>0x0B</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td>SET_REFERENCE_DISPENSE</td>
<td>Set the last result as a baseline for comparison</td>
<td>R</td>
<td>0x0C</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>STREAM</td>
<td>Start / stop streaming of raw data from sensor</td>
<td>R</td>
<td>0x10</td>
<td>0 or 1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td>FIRMWARE_BLOCK</td>
<td>Send a block of firmware data</td>
<td>W</td>
<td>0x20</td>
<td>HI(offset)</td>
<td>LO(offset)</td>
<td>(up to 512)</td>
</tr>
<tr class="row-odd"><td>FIRMWARE_PROGRAM</td>
<td>Cause the DMS to rewrite its FLASH based on the blocks sent</td>
<td>R</td>
<td>0x21</td>
<td>HI(size)</td>
<td>LO(SIZE)</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>The commands are described in more detail below.</p>
</div>
<div class="section" id="status">
<span id="id2"></span><h2>2.5. Status<a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<p>In response to this command, the DMS returns its current state of operation.  This command should be used
to poll the DMS (~10 Hz) to determine the result of other commands.</p>
<table border="1" class="colwidths-given docutils" id="manual-control-data">
<caption><span class="caption-number">Table 2.2 </span><span class="caption-text">Manual Control Data</span><a class="headerlink" href="#manual-control-data" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="62%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Data Item</th>
<th class="head">Field Lengths (bytes)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>State (u32)</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Flags (u32)</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Last Reported Error (u32)</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>The following states are currently defined.</p>
<table border="1" class="colwidths-given docutils" id="controller-states">
<caption><span class="caption-number">Table 2.3 </span><span class="caption-text">Controller States</span><a class="headerlink" href="#controller-states" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">State</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>OFF</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>INITIALIZATION</td>
</tr>
<tr class="row-even"><td>2</td>
<td>READY</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>CALIBRATION</td>
</tr>
<tr class="row-even"><td>4</td>
<td>MONITOR</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>STREAM</td>
</tr>
</tbody>
</table>
<p>The following flag bits are defined.</p>
<table border="1" class="colwidths-given docutils" id="controller-status-bit-field">
<caption><span class="caption-number">Table 2.4 </span><span class="caption-text">Controller Status Bit Field</span><a class="headerlink" href="#controller-status-bit-field" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Bits</th>
<th class="head">Status</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0-3</td>
<td>RESERVED</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>Configuration Fail (Hardware Error)</td>
</tr>
<tr class="row-even"><td>5-19</td>
<td>RESERVED</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>Configuration Using Defaults</td>
</tr>
<tr class="row-even"><td>21-31</td>
<td>RESERVED</td>
</tr>
</tbody>
</table>
<p>The following error codes are currently defined.</p>
<table border="1" class="colwidths-given docutils" id="error-codes">
<caption><span class="caption-number">Table 2.5 </span><span class="caption-text">Error Codes</span><a class="headerlink" href="#error-codes" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="20%" />
<col width="40%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Mnemonic</th>
<th class="head">Suggested Display Setting</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>DMS_ERR_NONE</td>
<td>No error.</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>DMS_ERR_SENSOR_NOT_DARK</td>
<td>Sensor is not dark.</td>
</tr>
<tr class="row-even"><td>2</td>
<td>DMS_ERR_INSUFFICIENT_BG_ILLUM</td>
<td>Insufficient background illumination.</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>DMS_ERR_INSUFFICIENT_PEAKS</td>
<td>8 peaks not found in calibration image.</td>
</tr>
<tr class="row-even"><td>4</td>
<td>DMS_ERR_CAL_NOT_CENTERED</td>
<td>Calibration not centered on sensor.</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>DMS_ERR_ILLEGAL_STATE</td>
<td>The DMS cannot accept that command at this time.</td>
</tr>
<tr class="row-even"><td>6</td>
<td>DMS_ERR_UNSUPPORTED_OPERATION</td>
<td>The DMS does not support that operation.</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>DMS_ERR_MEMORY</td>
<td>The DMS has insufficient memory to store the desired number of signals.</td>
</tr>
<tr class="row-even"><td>8</td>
<td>DMS_ERR_NO_VALID_REFERENCE</td>
<td>User reference mode was indicated, but no user reference has been set.</td>
</tr>
<tr class="row-odd"><td>9</td>
<td>DMS_ERR_STREAM_DIAMETER_UNSUPPORTED</td>
<td>No thresholds are defined for this stream diameter.</td>
</tr>
<tr class="row-even"><td>10</td>
<td>DMS_ERR_NO_RECENT_HISTORY</td>
<td>No dispense exists in the history to use for the user reference.</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>DMS_ERR_CALIBRATION_INVALID</td>
<td>The data in calibration contain errors.</td>
</tr>
<tr class="row-even"><td>12-255</td>
<td>RESERVED</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id">
<span id="id3"></span><h2>2.6. ID<a class="headerlink" href="#id" title="Permalink to this headline">¶</a></h2>
<p>This command causes the DMS to return the build date and time of its firmware, the unique ID associated with the processor, and the engineering version number.</p>
</div>
<div class="section" id="config-get">
<span id="id4"></span><h2>2.7. Config Get<a class="headerlink" href="#config-get" title="Permalink to this headline">¶</a></h2>
<p>In response to the CONFIG_GET command, the DMS will return the current value of all configuration parameters.  See <a class="reference internal" href="#configuration-data"><span class="std std-numref">Table 2.6</span></a>.</p>
<table border="1" class="colwidths-given docutils" id="configuration-data">
<caption><span class="caption-number">Table 2.6 </span><span class="caption-text">Configuration Data</span><a class="headerlink" href="#configuration-data" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="67%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Data Item</th>
<th class="head">Field Length (bytes)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Stream Diameter mils, (u32)</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Number of Dispenses (u32)</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Dispense Time, msec (u32)</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Dispense Period, msec (u32)</td>
<td>4</td>
</tr>
<tr class="row-even"><td>N Ref History (u32)</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Ref Mode (u32)</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>Please refer to the <a class="reference internal" href="firmware_spec.html#configuration-parameters"><span class="std std-ref">Configuration Parameters</span></a> in the <a class="reference internal" href="firmware_spec.html#firmware-spec"><span class="std std-ref">Firmware Specification</span></a> for the exact usage of these parameters.</p>
</div>
<div class="section" id="config-set">
<span id="id5"></span><h2>2.8. Config Set<a class="headerlink" href="#config-set" title="Permalink to this headline">¶</a></h2>
<p>The host may overwrite the configuration parameters with this command.  The data provided
should exactly match <a class="reference internal" href="#configuration-data"><span class="std std-numref">Table 2.6</span></a>.</p>
</div>
<div class="section" id="calibrate">
<span id="id6"></span><h2>2.9. Calibrate<a class="headerlink" href="#calibrate" title="Permalink to this headline">¶</a></h2>
<p>This command requests the DMS to perform a calibration operation.  The DMS must be in the READY state.
There are currently three operations defined, which the host may select via the wValue control parameter; see :numref: <cite>Calibration Operations</cite>.</p>
<table border="1" class="colwidths-given docutils" id="calibration-operations">
<caption><span class="caption-number">Table 2.7 </span><span class="caption-text">Calibration Operations</span><a class="headerlink" href="#calibration-operations" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="67%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operation</th>
<th class="head">wValue</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RESERVED</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>Get Dark Level</td>
<td>1</td>
</tr>
<tr class="row-even"><td>Set Background</td>
<td>2</td>
</tr>
<tr class="row-odd"><td>Calibrate</td>
<td>3</td>
</tr>
<tr class="row-even"><td>RESERVED</td>
<td>4-65535</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="firmware_spec.html#calibration"><span class="std std-ref">Calibration</span></a> in the <a class="reference internal" href="firmware_spec.html#firmware-spec"><span class="std std-ref">Firmware Specification</span></a> for the full details of these operations.</p>
<p>After the operation is commanded, <a class="reference internal" href="#status"><span class="std std-ref">Status</span></a> should be polled to observed the return of the DMS to the READY state.
If the error code is zero, then the calibration operation was successful; otherwise there was a problem that requires
operator attention.</p>
</div>
<div class="section" id="get-calibration">
<span id="id7"></span><h2>2.10. Get Calibration<a class="headerlink" href="#get-calibration" title="Permalink to this headline">¶</a></h2>
<p>The DMS returns the current calibration in response to this command. This is primarily for debugging purposes.
The calibration has the format shown in <a class="reference internal" href="#calibration-data"><span class="std std-numref">Table 2.8</span></a>.</p>
<table border="1" class="colwidths-given docutils" id="calibration-data">
<caption><span class="caption-number">Table 2.8 </span><span class="caption-text">Calibration Data</span><a class="headerlink" href="#calibration-data" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="67%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Data Item</th>
<th class="head">Field Length (bytes)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Dark Level (u16)</td>
<td>2</td>
</tr>
<tr class="row-odd"><td>Background (384 * u16)</td>
<td>768</td>
</tr>
<tr class="row-even"><td>Pixel Range (2 * u16)</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Bin Edges (9 * u16)</td>
<td>18</td>
</tr>
<tr class="row-even"><td>Cal Image (384 * u16)</td>
<td>768</td>
</tr>
<tr class="row-odd"><td>Cal Center (8 * f32)</td>
<td>32</td>
</tr>
<tr class="row-even"><td>Cal Sigma (8 * f32)</td>
<td>32</td>
</tr>
<tr class="row-odd"><td>Cal Amp Scale (8 * f32)</td>
<td>32</td>
</tr>
<tr class="row-even"><td>Cal Lateral Scale (8 * f32)</td>
<td>32</td>
</tr>
<tr class="row-odd"><td>Cal Sigma Scale (8 * f32)</td>
<td>32</td>
</tr>
</tbody>
</table>
<p>Please refer to the <a class="reference internal" href="firmware_spec.html#calibration"><span class="std std-ref">Calibration</span></a> section of the <a class="reference internal" href="firmware_spec.html#firmware-spec"><span class="std std-ref">Firmware Specification</span></a> for the meaning of these calibration elements.</p>
</div>
<div class="section" id="store-calibration">
<span id="id8"></span><h2>2.11. Store Calibration<a class="headerlink" href="#store-calibration" title="Permalink to this headline">¶</a></h2>
<p>After the calibration is computed, it is held in RAM only.  After this command is executed the
calibration is written to non-volatile memory.</p>
</div>
<div class="section" id="monitor-dispense">
<span id="monitor-dispense-icd"></span><h2>2.12. Monitor Dispense<a class="headerlink" href="#monitor-dispense" title="Permalink to this headline">¶</a></h2>
<p>This command instructs the DMS to begin monitoring the sensor for a dispense operation.  Assuming it was in the READY state when the command was received,
it will proceed to the MONITOR state, and wait for triggers.  When the DMS
has returned to the READY state, the results are ready and can be requested.</p>
</div>
<div class="section" id="get-dispense-data">
<span id="id9"></span><h2>2.13. Get Dispense Data<a class="headerlink" href="#get-dispense-data" title="Permalink to this headline">¶</a></h2>
<p>After monitoring is complete, this command causes the DMS to emit the last results of the operation.  4096 bytes may be captured with each read, which
means that some fields (&#8216;signals&#8217;, in particular) will require several reads
to capture fully.  To use this command most effectively, instantiate
an instance of the DMS_DISPENSE_DATA structure.  Then, to receive a particular
field, use code similar to the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">uint32_t</span> <span class="n">offsetBytes</span> <span class="o">=</span> <span class="n">offsetof</span><span class="p">(</span><span class="n">dmsDispenseData</span><span class="o">.</span><span class="n">info</span><span class="p">);</span>
<span class="n">ctrl_read</span><span class="p">(</span>
                <span class="n">DMS_CMD_GET_DISPENSE_DATA</span><span class="p">,</span>         <span class="o">//</span> <span class="n">bReq</span>
                <span class="n">HI</span><span class="p">(</span><span class="n">offsetBytes</span><span class="p">),</span>                   <span class="o">//</span> <span class="n">wValue</span>
                <span class="n">LO</span><span class="p">(</span><span class="n">offsetBytes</span><span class="p">),</span>                   <span class="o">//</span> <span class="n">wIndex</span>
                <span class="o">&amp;</span><span class="n">dmsDispenseData</span><span class="o">.</span><span class="n">info</span><span class="p">,</span>             <span class="o">//</span> <span class="n">data</span>
                <span class="n">sizeof</span><span class="p">(</span><span class="n">dmsDispenseData</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>       <span class="o">//</span> <span class="n">nBytes</span>
<span class="p">);</span>
</pre></div>
</div>
<p>To receive larger blocks, simply loop, incrementing offsetBytes each time by
the number of characters received.</p>
</div>
<div class="section" id="clear-history">
<span id="id10"></span><h2>2.14. Clear History<a class="headerlink" href="#clear-history" title="Permalink to this headline">¶</a></h2>
<p>When calculation features used for fault detection, several features are
normalized by the median of results from previous plates.  This is useful when
the baseline has changed, for example due to the replacement of the dispense
cartridge.</p>
</div>
<div class="section" id="set-reference-dispense">
<span id="id11"></span><h2>2.15. Set Reference Dispense<a class="headerlink" href="#set-reference-dispense" title="Permalink to this headline">¶</a></h2>
<p>If the &#8216;Ref Mode&#8217; configuration parameter is non-zero, a user reference will be
used.  This command makes the most recent dispense the user reference.</p>
</div>
<div class="section" id="stream">
<span id="id12"></span><h2>2.16. Stream<a class="headerlink" href="#stream" title="Permalink to this headline">¶</a></h2>
<p>This command controls raw data streaming.  The wValue parameter controls the streaming: 0 halts streaming,
1 begins streaming, and all other values are reserved.  After receiving this command with a wValue of 1,
the DMS will begin streaming the raw data from the sensor to the host at the full, 1kHz rate, on Bulk Transfer
endpoint 1.  The DMS will stream packets of the form described in Table 10 until commanded to stop.  Note the
DMS must be in the READY state to use this command.</p>
<table border="1" class="colwidths-given docutils" id="stream-packet-format">
<caption><span class="caption-number">Table 2.9 </span><span class="caption-text">Stream Packet Format</span><a class="headerlink" href="#stream-packet-format" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Data Item</th>
<th class="head">Field Length (bytes)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Header (u32)</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Packed Samples (u32)</td>
<td>150</td>
</tr>
</tbody>
</table>
<p>The header consists of two parts.  The upper 16 bits holds the value 0x7819, which may be used to scan for the start
of a packet if synchronization is lost.  The lower 16 bits contain trigger status.  Bit 0 is the pump trigger, while
bit 1 is the plate trigger.  Bits 2 through 15 are reserved.</p>
</div>
<div class="section" id="firmware-block">
<span id="id13"></span><h2>2.17. Firmware Block<a class="headerlink" href="#firmware-block" title="Permalink to this headline">¶</a></h2>
<p>In order to update the firmware on the DMS, it needs to be transferred to the
DMS&#8217;s memory using this command.  Up to 512 bytes can be sent with each
transfer.  The offset of each block in bytes are the wValue and wIndex
parameters.  Only send binary program files (e.g. DMS.bin).</p>
</div>
<div class="section" id="firmware-program">
<span id="id14"></span><h2>2.18. Firmware Program<a class="headerlink" href="#firmware-program" title="Permalink to this headline">¶</a></h2>
<p>Once the program has been successfully transmitted to the DMS in its entirety,
this command may be executed to copy the program from RAM into the device&#8217;s
FLASH.  The device will then be rebooted.</p>
</div>
<div class="section" id="dmscodes-h">
<span id="id15"></span><h2>2.19. dmsCodes.h<a class="headerlink" href="#dmscodes-h" title="Permalink to this headline">¶</a></h2>
<p>The current version of dmsCodes.h is included here for reference. Note the horizontal scroll bar at the bottom, if you need to see the end of the lines. Sorry, this is a pain!</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">	dmsCodes.h</span>
<span class="cm">	</span>
<span class="cm">	Declarations of codes common to the DMS and host devices.</span>
<span class="cm">	</span>
<span class="cm">	2016-08-23  WHF  Created.</span>
<span class="cm">*/</span>

<span class="cp">#ifndef __DMSCODES_H__</span>
<span class="cp">#define __DMSCODES_H__</span>

<span class="cp">#include</span> <span class="cpf">&lt;stdint.h&gt;</span><span class="cp"></span>

<span class="c1">//********************************  Constants  *******************************//</span>
<span class="c1">// To be replaced with Creare&#39;s vendor ID:</span>
<span class="cp">#define DMS_VID                                                      0xABCD</span>

<span class="c1">// Product ID for the Droplet Measurement System.</span>
<span class="cp">#define DMS_PID                                                      0x7819</span>

<span class="c1">// This is the number of elements per scan.  Note that not all will be valid,</span>
<span class="c1">//  since some sampling past the end is required for integration.</span>
<span class="cp">#define DMS_ENTRIES_PER_SCAN                                            400</span>

<span class="c1">// The number of pixels in the sensor.</span>
<span class="cp">#define DMS_N_PIXELS                                                    384</span>

<span class="c1">// The number of bins to use for determining characteristics.</span>
<span class="cp">#define DMS_N_BINS                                                        8</span>

<span class="c1">// The maximum number of dispense events on a plate.</span>
<span class="cp">#define DMS_MAX_DISPENSE                                                192</span>

<span class="c1">// The rate at which frames are sampled from the sensor.</span>
<span class="cp">#define DMS_FRAME_RATE                                                 1000</span>

<span class="c1">// The maximum number of signals to process.  This is limited by the </span>
<span class="c1">//   physical size of the memory.</span>
<span class="cp">#define DMS_MAX_SIGNALS                                              348180</span>

<span class="c1">// The maximum number of history dispenses that can be stored.</span>
<span class="cp">#define DMS_MAX_HISTORY                                                  10</span>


<span class="cp">#define DMS_STREAM_HEADER_MAGIC                                  0x78190000</span>

<span class="cp">#define DMS_STREAM_HEADER_MAGIC_MASK                             0xFFFF0000</span>


<span class="c1">/////  Command Codes  /////</span>
<span class="cp">#define DMS_CMD_STATUS                                                 0x01</span>
<span class="cp">#define DMS_CMD_ID                                                     0x02</span>
<span class="cp">#define DMS_CMD_CONFIG_GET                                             0x03</span>
<span class="cp">#define DMS_CMD_CONFIG_SET                                             0x04</span>
<span class="cp">#define DMS_CMD_CALIBRATE                                              0x05</span>
<span class="cp">#define DMS_CMD_GET_CALIBRATION                                        0x06</span>
<span class="cp">#define DMS_CMD_STORE_CALIBRATION                                      0x07</span>
<span class="cp">#define DMS_CMD_MONITOR_DISPENSE                                       0x08</span>
<span class="cp">#define DMS_CMD_GET_DISPENSE_DATA                                      0x09</span>
<span class="cp">#define DMS_CMD_RESET                                                  0x0A</span>
<span class="cp">#define DMS_CMD_CLEAR_HISTORY                                          0x0B</span>
<span class="cp">#define DMS_CMD_SET_REFERENCE_DISPENSE                                 0x0C</span>

<span class="cp">#define DMS_CMD_STREAM                                                 0x10</span>

<span class="cp">#define DMS_CMD_FIRMWARE_BLOCK                                         0x20</span>
<span class="cp">#define DMS_CMD_FIRMWARE_PROGRAM                                       0x21</span>

<span class="cp">#define DMS_CMD_GET_FAULT_THRESHOLDS                                   0x30</span>
<span class="cp">#define DMS_CMD_SET_FAULT_THRESHOLDS                                   0x31</span>


<span class="c1">/////  Calibration Command Sub-Codes  /////</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">tag_cal_mode</span> <span class="p">{</span>
	<span class="n">DMS_CAL_OFF</span><span class="p">,</span>
	<span class="n">DMS_CAL_GET_DARK_LEVEL</span><span class="p">,</span>
	<span class="n">DMS_CAL_SET_BACKGROUND</span><span class="p">,</span>
	<span class="n">DMS_CAL_CALIBRATE</span>
<span class="p">}</span> <span class="n">dms_cal_mode_t</span><span class="p">;</span>	

<span class="c1">/////  Flags  /////</span>
<span class="c1">//  The first 16 are hardware errors; the last 16 are warnings.</span>
<span class="cp">#define DMS_FLAGS_EEPROM_FAIL                                   0x00000010U</span>
<span class="cp">#define DMS_FLAGS_CONFIG_DEFAULTS                               0x00100000U</span>
<span class="cp">#define DMS_FLAGS_FAULT_THRESH_DEFAULTS                         0x00200000U</span>


<span class="c1">/////  Error Codes  /////</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">tag_dms_err</span> <span class="p">{</span>
	<span class="n">DMS_ERR_NONE</span><span class="p">,</span>
	<span class="n">DMS_ERR_SENSOR_NOT_DARK</span><span class="p">,</span>
	<span class="n">DMS_ERR_INSUFFICIENT_BG_ILLUM</span><span class="p">,</span>
	<span class="n">DMS_ERR_INSUFFICIENT_PEAKS</span><span class="p">,</span>
	<span class="n">DMS_ERR_CAL_NOT_CENTERED</span><span class="p">,</span>
	
	<span class="n">DMS_ERR_ILLEGAL_STATE</span><span class="p">,</span>
	<span class="n">DMS_ERR_UNSUPPORTED_OPERATION</span><span class="p">,</span>
	<span class="n">DMS_ERR_MEMORY</span><span class="p">,</span>
	<span class="n">DMS_ERR_NO_VALID_REFERENCE</span><span class="p">,</span>
	<span class="n">DMS_ERR_STREAM_DIAMETER_UNSUPPORTED</span><span class="p">,</span>
	<span class="n">DMS_ERR_NO_RECENT_HISTORY</span><span class="p">,</span>
	<span class="n">DMS_ERR_CALIBRATION_INVALID</span><span class="p">,</span>
	
	<span class="n">DMS_N_ERRORS</span>
<span class="p">}</span> <span class="n">dms_err_t</span><span class="p">;</span>


<span class="c1">//**********************************  Types  *********************************//</span>
<span class="cp">#include</span> <span class="cpf">&lt;pshpack4.h&gt;</span><span class="cp"></span>

<span class="k">typedef</span> <span class="kt">uint32_t</span> <span class="n">dms_timestamp_t</span><span class="p">;</span>      <span class="c1">// type used for recording event times</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_status</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>
		<span class="n">state</span><span class="p">,</span>                 <span class="c1">// Current controller state</span>
		<span class="n">flags</span><span class="p">,</span>                 <span class="c1">// Bit flags set</span>
		<span class="n">lastError</span><span class="p">;</span>             <span class="c1">// Result of the last command</span>
<span class="p">}</span> <span class="n">DMS_STATUS</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_id</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">build_date_time</span><span class="p">[</span><span class="mi">24</span><span class="p">];</span>  <span class="c1">// Mmm dd yyyy hh:mm:ss  (20 char, plus 4 nulls)</span>
	<span class="kt">uint32_t</span> <span class="n">unique_id</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>     <span class="c1">// from the processor</span>
	<span class="kt">char</span> <span class="n">engineering_version_number</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>  <span class="c1">// null terminated string, e.g. &quot;1.0.0&quot;	</span>
<span class="p">}</span> <span class="n">DMS_ID</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_config</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>
		<span class="n">stream_diameter_mils</span><span class="p">,</span>
		<span class="n">n_dispenses</span><span class="p">,</span>
		<span class="n">dispense_time_msec</span><span class="p">,</span>
		<span class="n">dispense_period_msec</span><span class="p">,</span>
		<span class="n">n_ref_history</span><span class="p">,</span>
		<span class="n">user_ref_mode</span><span class="p">;</span>            <span class="c1">// non-zero if in user mode</span>
<span class="p">}</span> <span class="n">DMS_CONFIG</span><span class="p">;</span>

<span class="cp">#include</span> <span class="cpf">&lt;poppack.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;pshpack2.h&gt;</span><span class="cp"></span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_calibration</span> <span class="p">{</span>
	<span class="kt">uint16_t</span>
		<span class="n">dark_level</span><span class="p">,</span>
		<span class="n">cal_background</span><span class="p">[</span><span class="n">DMS_N_PIXELS</span><span class="p">],</span>
		<span class="n">cal_pix_range</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
		<span class="n">cal_bin_edges</span><span class="p">[</span><span class="n">DMS_N_BINS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>  <span class="c1">// the left edge of bin, plus last right</span>
		
	<span class="kt">int16_t</span>	
		<span class="n">cal_image</span><span class="p">[</span><span class="n">DMS_N_PIXELS</span><span class="p">];</span>
		
	<span class="kt">float</span>
		<span class="n">cal_center</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">],</span>
		<span class="n">cal_sigma</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">],</span>
		<span class="n">cal_amp_scale</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">],</span>
		<span class="n">cal_lateral_scale</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">],</span>
		<span class="n">cal_sigma_scale</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">];</span>
<span class="p">}</span> <span class="n">DMS_CALIBRATION</span><span class="p">;</span>
<span class="cp">#include</span> <span class="cpf">&lt;poppack.h&gt;</span><span class="cp"></span>


<span class="cp">#include</span> <span class="cpf">&lt;pshpack4.h&gt;</span><span class="cp"></span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_signals</span> <span class="p">{</span>
	<span class="kt">float</span>
		<span class="n">signal_amp</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">],</span>
		<span class="n">signal_disp</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">],</span>
		<span class="n">signal_width</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">];</span>
<span class="p">}</span> <span class="n">DMS_SIGNALS</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_triggers</span> <span class="p">{</span>
	<span class="n">dms_timestamp_t</span>
		<span class="n">begin_dispense</span><span class="p">,</span>
		<span class="n">end_dispense</span><span class="p">;</span>		
<span class="p">}</span> <span class="n">DMS_TRIGGERS</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_info</span> <span class="p">{</span>
	<span class="kt">uint32_t</span>
		<span class="n">background_warnings</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DMS_INFO</span><span class="p">;</span>

<span class="c1">// Macros to generate bit-masks for warnings: </span>
<span class="cp">#define DMS_INFO_BACKGROUND_WARNING_DIFF(c)                      (1 &lt;&lt; (c))</span>
<span class="cp">#define DMS_INFO_BACKGROUND_WARNING_LOW(c)                    (1 &lt;&lt; (c)+16)</span>

<span class="c1">// These features are defined for each well (n_bins * n_dispenses elements)</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_features</span> <span class="p">{</span>	
	<span class="kt">float</span>
		<span class="n">disp_mean</span><span class="p">,</span>
		<span class="n">disp_sdev</span><span class="p">,</span>
		<span class="n">width_mean</span><span class="p">,</span>
		<span class="n">width_sdev</span><span class="p">,</span>
		<span class="n">width_mean_n</span><span class="p">,</span>
		<span class="n">amp_mean_btw_n</span><span class="p">,</span>
		<span class="n">amp_mean_dur_n</span><span class="p">,</span>
		<span class="n">amp_mean_dur</span><span class="p">,</span>
		<span class="n">amp_corr</span><span class="p">;</span>	
<span class="p">}</span> <span class="n">DMS_FEATURES</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_bin_features</span> <span class="p">{</span>
	<span class="n">DMS_FEATURES</span> <span class="n">bins</span><span class="p">[</span><span class="n">DMS_N_BINS</span><span class="p">];</span>
<span class="p">}</span> <span class="n">DMS_BIN_FEATURES</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_all_features</span> <span class="p">{</span>
	<span class="n">DMS_BIN_FEATURES</span>
		<span class="n">plate_features</span><span class="p">,</span>
		<span class="n">channel_features</span><span class="p">[</span><span class="n">DMS_MAX_DISPENSE</span><span class="p">];</span>
<span class="p">}</span> <span class="n">DMS_ALL_FEATURES</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_faults</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">well_faults</span><span class="p">[</span><span class="n">DMS_MAX_DISPENSE</span><span class="p">][</span><span class="n">DMS_N_BINS</span><span class="p">];</span>
<span class="p">}</span> <span class="n">DMS_FAULTS</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_dispense_data</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">signalCount</span><span class="p">;</span>
	<span class="n">DMS_SIGNALS</span> <span class="n">signals</span><span class="p">[</span><span class="n">DMS_MAX_SIGNALS</span><span class="p">];</span>
	<span class="n">DMS_TRIGGERS</span> <span class="n">triggers</span><span class="p">[</span><span class="n">DMS_MAX_DISPENSE</span><span class="p">];</span>
	<span class="n">DMS_INFO</span> <span class="n">info</span><span class="p">;</span>
	<span class="n">DMS_ALL_FEATURES</span> <span class="n">features</span><span class="p">;</span>
	<span class="n">DMS_FAULTS</span> <span class="n">faults</span><span class="p">;</span>
	<span class="n">DMS_BIN_FEATURES</span> <span class="n">reference</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DMS_DISPENSE_DATA</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_stream_out</span> <span class="p">{</span>
	<span class="kt">uint32_t</span> 
		<span class="n">header</span><span class="p">,</span>     <span class="c1">// magic value, and trigger state</span>
		<span class="c1">// Buffer for samples, packed 12 bits at a time into 32-bit words.</span>
		<span class="n">packedSamples</span><span class="p">[</span><span class="n">DMS_ENTRIES_PER_SCAN</span> <span class="o">*</span> <span class="mi">12</span> <span class="o">/</span> <span class="mi">32</span><span class="p">];</span>
<span class="p">}</span> <span class="n">DMS_STREAM_OUT</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_fault_det_param</span> <span class="p">{</span>
	<span class="kt">float</span> <span class="n">thresholds</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span> <span class="c1">// corresponding to notice, warning, and error.</span>
<span class="p">}</span> <span class="n">DMS_FAULT_DET_PARAM</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tag_dms_fault_det_thresholds</span> <span class="p">{</span>
	<span class="n">DMS_FAULT_DET_PARAM</span>
		<span class="n">amp_corr_u</span><span class="p">,</span> 	
		<span class="n">amp_mean_dur_n_u</span><span class="p">,</span>
		<span class="n">amp_mean_dur_n_l</span><span class="p">,</span>
		<span class="n">amp_mean_dur_min</span><span class="p">,</span>
		<span class="n">amp_mean_btw_n_u</span><span class="p">,</span>
		<span class="n">disp_mean_lu</span><span class="p">,</span>
		<span class="n">disp_sdev_u</span><span class="p">,</span> 
		<span class="n">width_mean_n_lu</span><span class="p">,</span>
		<span class="n">width_mean_u</span><span class="p">,</span>
		<span class="n">width_mean_l</span><span class="p">,</span>
		<span class="n">width_sdev_u</span><span class="p">;</span>
<span class="p">}</span> <span class="n">DMS_FAULT_DET_THRESHOLDS</span><span class="p">;</span>


<span class="cp">#include</span> <span class="cpf">&lt;poppack.h&gt;</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* __DMSCODES_H__ */</span><span class="cp"></span>


</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/Creare_DMS.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Interface Control Document</a><ul>
<li><a class="reference internal" href="#copyright">2.1. Copyright</a></li>
<li><a class="reference internal" href="#introduction">2.2. Introduction</a></li>
<li><a class="reference internal" href="#usb-interface">2.3. USB Interface</a></li>
<li><a class="reference internal" href="#endpoint-0-commands">2.4. Endpoint 0 Commands</a></li>
<li><a class="reference internal" href="#status">2.5. Status</a></li>
<li><a class="reference internal" href="#id">2.6. ID</a></li>
<li><a class="reference internal" href="#config-get">2.7. Config Get</a></li>
<li><a class="reference internal" href="#config-set">2.8. Config Set</a></li>
<li><a class="reference internal" href="#calibrate">2.9. Calibrate</a></li>
<li><a class="reference internal" href="#get-calibration">2.10. Get Calibration</a></li>
<li><a class="reference internal" href="#store-calibration">2.11. Store Calibration</a></li>
<li><a class="reference internal" href="#monitor-dispense">2.12. Monitor Dispense</a></li>
<li><a class="reference internal" href="#get-dispense-data">2.13. Get Dispense Data</a></li>
<li><a class="reference internal" href="#clear-history">2.14. Clear History</a></li>
<li><a class="reference internal" href="#set-reference-dispense">2.15. Set Reference Dispense</a></li>
<li><a class="reference internal" href="#stream">2.16. Stream</a></li>
<li><a class="reference internal" href="#firmware-block">2.17. Firmware Block</a></li>
<li><a class="reference internal" href="#firmware-program">2.18. Firmware Program</a></li>
<li><a class="reference internal" href="#dmscodes-h">2.19. dmsCodes.h</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="firmware_spec.html" title="previous chapter">1. Firmware Specification</a></li>
      <li>Next: <a href="interface_spec.html" title="next chapter">3. Interface Specification</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/interface_control_doc.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Creare.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/interface_control_doc.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>